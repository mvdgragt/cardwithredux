{"ast":null,"code":"var _jsxFileName = \"/Users/mvdgragt/EC/cards/projektarbete/src/pages/addCard.jsx\",\n    _s = $RefreshSig$();\n\nimport \"../App.css\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { addCards } from \"../redux/walletSlice\";\nimport { useHistory } from \"react-router-dom\";\nimport { useState, useEffect } from \"react\";\nimport Card from \"../components/MyCards\";\nimport swedbankImage from \"../images/swedbank.png\";\nimport handelsbankenImage from \"../images/handelsbanken.png\";\nimport icaImage from \"../images/ICA.png\";\nimport mastercardImage from \"../images/mastercardlogo.png\";\nimport nordeaImage from \"../images/nordea.png\";\nimport visaCardImage from \"../images/visacardlogo.png\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst AddCard = () => {\n  _s();\n\n  let dispatch = useDispatch();\n  const history = useHistory();\n  const {\n    cardHolderName\n  } = useSelector(state => state.wallet);\n  const [cardNumber, setCardNumber] = useState(\"\");\n  const [expiryMonth, setExpiryMonth] = useState(null);\n  const [expiryYear, setExpiryYear] = useState(\"\");\n  const [cvc, setCvc] = useState(\"\");\n  const [bank, setBank] = useState(\"swedbank\");\n  const [logo, setLogo] = useState(swedbankImage);\n  const [vendor, setVendor] = useState(mastercardImage);\n  const [cardNumberColor, setCardNumberColor] = useState(\"\");\n  const [validColor, setValidColor] = useState(\"\");\n  let newDate = new Date();\n  let currentMonth = newDate.getMonth() + 1;\n  let currentYear = newDate.getYear() - 100;\n  const val1 = Number(expiryMonth) + Number(expiryYear) * 10;\n  const val2 = currentYear * 10 + currentMonth;\n  const result = val1 - val2;\n  const valid = result < 0;\n  useEffect(() => {\n    let input = document.querySelector(\"#year\").value;\n\n    if (!valid && expiryMonth !== null && input >= 0) {\n      setValidColor(\"2px solid green\");\n    } else if (valid && expiryMonth !== null && input >= 0) {\n      setValidColor(\"2px solid red\");\n    } else {\n      setValidColor(\"1px solid #ced4da\");\n    }\n  }, [valid, expiryMonth]);\n\n  const addCard = () => {\n    if (cardNumber.toString().length === 19 && !valid && expiryMonth !== null) {\n      let newCard = {\n        cardNumber: cardNumber,\n        name: cardHolderName,\n        expiryMonth: expiryMonth,\n        expiryYear: expiryYear,\n        cvc: cvc,\n        bank: bank,\n        vendor: vendor,\n        logo: logo\n      };\n      dispatch(addCards(newCard));\n      history.push(\"/\");\n    }\n  };\n\n  const validateNumber = e => {\n    let regexNumber = e.target.value.replace(/\\D+/g, \"\").replace(/\\D/g, \"\").match(/.{1,4}/g) || [];\n    setCardNumber(regexNumber.join(\" \").substring(0, 19));\n\n    if (regexNumber.toString().length === 19 || regexNumber.toString().length === 21) {\n      setCardNumberColor(\"2px solid green\");\n    } else {\n      setCardNumberColor(\"2px solid red\");\n    }\n  };\n\n  const flipCard = () => {\n    const card = document.querySelector(\".card\");\n\n    if (card.classList.contains(\"is-flipped\")) {\n      card.classList.remove(\"is-flipped\");\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"small\",\n      children: \"new card\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Card, {\n      cardNumber: cardNumber,\n      name: cardHolderName,\n      expiryMonth: expiryMonth,\n      expiryYear: expiryYear,\n      cvc: cvc,\n      bank: bank,\n      vendor: vendor,\n      logo: logo\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"inputWrapper\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"cardNumberInput\",\n          children: \"Card Number\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"number\",\n          id: \"cardNumberInput\",\n          value: cardNumber,\n          onChange: validateNumber,\n          onFocus: flipCard,\n          style: {\n            border: cardNumberColor\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"cardHolderInput\",\n          children: \"Card holder\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"name\",\n          id: \"cardHolderInput\",\n          value: cardHolderName,\n          readOnly: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"validWrapper\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"validThru1\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"month\",\n              children: \"month\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              className: `exp ${valid}`,\n              id: \"month\",\n              defaultValue: \"MM\",\n              onChange: e => {\n                setExpiryMonth(e.target.value);\n              },\n              onFocus: flipCard,\n              style: {\n                border: validColor\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"MM\",\n                disabled: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 144,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"01\",\n                children: \"01\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 148,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"02\",\n                children: \"02\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 149,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"03\",\n                children: \"03\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 150,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"04\",\n                children: \"04\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 151,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"05\",\n                children: \"05\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 152,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"06\",\n                children: \"06\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 153,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"07\",\n                children: \"07\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 154,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"08\",\n                children: \"08\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 155,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"09\",\n                children: \"09\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 156,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"10\",\n                children: \"10\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 157,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"11\",\n                children: \"11\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 158,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"12\",\n                children: \"12\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 159,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"validThru2\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"year\",\n              children: \"year\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: `exp ${valid}`,\n              id: \"year\",\n              value: expiryYear,\n              placeholder: \"YY\",\n              type: \"number\",\n              style: {\n                border: validColor\n              },\n              onChange: e => {\n                setExpiryYear(e.target.value.slice(0, 2));\n              },\n              onFocus: flipCard\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"cvcInput\",\n          children: \"CVC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          name: \"cvc\",\n          id: \"cvcInput\",\n          value: cvc,\n          onChange: e => setCvc(e.target.value.slice(0, 3)),\n          onFocus: () => {\n            const card = document.querySelector(\".card\");\n            card.classList.toggle(\"is-flipped\");\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"selectBank\",\n          children: \"Vendor\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          required: true,\n          onChange: e => {\n            if (e.target.value === \"swedbank\") {\n              setLogo(swedbankImage);\n              setVendor(mastercardImage);\n            } else if (e.target.value === \"icabank\") {\n              setLogo(icaImage);\n              setVendor(visaCardImage);\n            } else if (e.target.value === \"nordea\") {\n              setLogo(nordeaImage);\n              setVendor(visaCardImage);\n            } else if (e.target.value === \"handelsbanken\") {\n              setLogo(handelsbankenImage);\n              setVendor(mastercardImage);\n            }\n\n            setBank(e.target.value);\n          },\n          defaultValue: \"Vendor\",\n          id: \"selectBank\",\n          onFocus: flipCard,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"Vendor\",\n            disabled: true,\n            hidden: true,\n            children: \"Vendor\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"handelsbanken\",\n            children: \"Handelsbanken\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"swedbank\",\n            children: \"swedbank\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"icabank\",\n            children: \"ica banken\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"nordea\",\n            children: \"nordea\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: addCard,\n        children: \"Add card\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 97,\n    columnNumber: 5\n  }, this);\n};\n\n_s(AddCard, \"vd9QFlTulh/osY6IpwHVi0iOf6U=\", false, function () {\n  return [useDispatch, useHistory, useSelector];\n});\n\n_c = AddCard;\nexport { AddCard };\n\nvar _c;\n\n$RefreshReg$(_c, \"AddCard\");","map":{"version":3,"sources":["/Users/mvdgragt/EC/cards/projektarbete/src/pages/addCard.jsx"],"names":["useDispatch","useSelector","addCards","useHistory","useState","useEffect","Card","swedbankImage","handelsbankenImage","icaImage","mastercardImage","nordeaImage","visaCardImage","AddCard","dispatch","history","cardHolderName","state","wallet","cardNumber","setCardNumber","expiryMonth","setExpiryMonth","expiryYear","setExpiryYear","cvc","setCvc","bank","setBank","logo","setLogo","vendor","setVendor","cardNumberColor","setCardNumberColor","validColor","setValidColor","newDate","Date","currentMonth","getMonth","currentYear","getYear","val1","Number","val2","result","valid","input","document","querySelector","value","addCard","toString","length","newCard","name","push","validateNumber","e","regexNumber","target","replace","match","join","substring","flipCard","card","classList","contains","remove","border","slice","toggle"],"mappings":"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","sourcesContent":["import \"../App.css\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { addCards } from \"../redux/walletSlice\";\nimport { useHistory } from \"react-router-dom\";\nimport { useState, useEffect } from \"react\";\nimport Card from \"../components/MyCards\";\nimport swedbankImage from \"../images/swedbank.png\";\nimport handelsbankenImage from \"../images/handelsbanken.png\";\nimport icaImage from \"../images/ICA.png\";\nimport mastercardImage from \"../images/mastercardlogo.png\";\nimport nordeaImage from \"../images/nordea.png\";\nimport visaCardImage from \"../images/visacardlogo.png\"\n\n\nconst AddCard = () => {\n  let dispatch = useDispatch();\n  const history = useHistory();\n\n  const { cardHolderName } = useSelector((state) => state.wallet);\n\n  const [cardNumber, setCardNumber] = useState(\"\");\n  const [expiryMonth, setExpiryMonth] = useState(null);\n  const [expiryYear, setExpiryYear] = useState(\"\");\n  const [cvc, setCvc] = useState(\"\");\n  const [bank, setBank] = useState(\"swedbank\");\n  const [logo, setLogo] = useState(\n    swedbankImage\n  );\n  const [vendor, setVendor] = useState(\n    mastercardImage\n  );\n  const [cardNumberColor, setCardNumberColor] = useState(\"\");\n  const [validColor, setValidColor] = useState(\"\");\n\n  let newDate = new Date();\n  let currentMonth = newDate.getMonth() + 1;\n  let currentYear = newDate.getYear() - 100;\n  const val1 = Number(expiryMonth) + Number(expiryYear) * 10;\n  const val2 = currentYear * 10 + currentMonth;\n  const result = val1 - val2;\n  const valid = result < 0;\n\n  useEffect(() => {\n    let input = document.querySelector(\"#year\").value;\n    if (!valid && expiryMonth !== null && input >= 0) {\n      setValidColor(\"2px solid green\");\n    } else if (valid && expiryMonth !== null && input >= 0) {\n      setValidColor(\"2px solid red\");\n    } else {\n      setValidColor(\"1px solid #ced4da\");\n    }\n  }, [valid, expiryMonth]);\n\n  const addCard = () => {\n    if (cardNumber.toString().length === 19 && !valid && expiryMonth !== null) {\n      let newCard = {\n        cardNumber: cardNumber,\n        name: cardHolderName,\n        expiryMonth: expiryMonth,\n        expiryYear: expiryYear,\n        cvc: cvc,\n        bank: bank,\n        vendor: vendor,\n        logo: logo,\n      };\n      dispatch(addCards(newCard));\n      history.push(\"/\");\n    }\n  };\n\n  const validateNumber = (e) => {\n    let regexNumber =\n      e.target.value\n        .replace(/\\D+/g, \"\")\n        .replace(/\\D/g, \"\")\n        .match(/.{1,4}/g) || [];\n    setCardNumber(regexNumber.join(\" \").substring(0, 19));\n\n    if (\n      regexNumber.toString().length === 19 ||\n      regexNumber.toString().length === 21\n    ) {\n      setCardNumberColor(\"2px solid green\");\n    } else {\n      setCardNumberColor(\"2px solid red\");\n    }\n  };\n\n  const flipCard = () => {\n    const card = document.querySelector(\".card\");\n    if (card.classList.contains(\"is-flipped\")) {\n      card.classList.remove(\"is-flipped\");\n    }\n  };\n\n  return (\n    <div className=\"App\">\n      <p className=\"small\">new card</p>\n      <Card\n        cardNumber={cardNumber}\n        name={cardHolderName}\n        expiryMonth={expiryMonth}\n        expiryYear={expiryYear}\n        cvc={cvc}\n        bank={bank}\n        vendor={vendor}\n        logo={logo}\n      />\n\n      <form>\n        <div id=\"inputWrapper\">\n          <label htmlFor=\"cardNumberInput\">Card Number</label>\n          <input\n            type=\"text\"\n            name=\"number\"\n            id=\"cardNumberInput\"\n            value={cardNumber}\n            onChange={validateNumber}\n            onFocus={flipCard}\n            style={{ border: cardNumberColor }}\n          />\n\n          <label htmlFor=\"cardHolderInput\">Card holder</label>\n          <input\n            type=\"text\"\n            name=\"name\"\n            id=\"cardHolderInput\"\n            value={cardHolderName}\n            readOnly\n          />\n          <div id=\"validWrapper\">\n            <div id=\"validThru1\">\n              <label htmlFor=\"month\">month</label>\n              <select\n                className={`exp ${valid}`}\n                id=\"month\"\n                defaultValue={\"MM\"}\n                onChange={(e) => {\n                  setExpiryMonth(e.target.value);\n                }}\n                onFocus={flipCard}\n                style={{ border: validColor }}\n              >\n                <option \n                value=\"MM\" \n                disabled>\n                </option>\n                <option value=\"01\">01</option>\n                <option value=\"02\">02</option>\n                <option value=\"03\">03</option>\n                <option value=\"04\">04</option>\n                <option value=\"05\">05</option>\n                <option value=\"06\">06</option>\n                <option value=\"07\">07</option>\n                <option value=\"08\">08</option>\n                <option value=\"09\">09</option>\n                <option value=\"10\">10</option>\n                <option value=\"11\">11</option>\n                <option value=\"12\">12</option>\n              </select>\n            </div>\n\n            <div id=\"validThru2\">\n              <label htmlFor=\"year\">year</label>\n              <input\n                className={`exp ${valid}`}\n                id=\"year\"\n                value={expiryYear}\n                placeholder=\"YY\"\n                type=\"number\"\n                style={{ border: validColor }}\n                onChange={(e) => {\n                  setExpiryYear(e.target.value.slice(0, 2));\n                }}\n                onFocus={flipCard}\n              />\n            </div>\n          </div>\n\n          <label htmlFor=\"cvcInput\">CVC</label>\n          <input\n            type=\"number\"\n            name=\"cvc\"\n            id=\"cvcInput\"\n            value={cvc}\n            onChange={(e) => setCvc(e.target.value.slice(0, 3))}\n            onFocus={() => {\n              const card = document.querySelector(\".card\");\n              card.classList.toggle(\"is-flipped\");\n            }}\n          />\n          <label htmlFor=\"selectBank\">Vendor</label>\n          <select\n            required\n            onChange={(e) => {\n              if (e.target.value === \"swedbank\") {\n                setLogo(swedbankImage);\n                setVendor(mastercardImage);\n              } else if (e.target.value === \"icabank\") {\n                setLogo(icaImage);\n                setVendor(\n                  visaCardImage\n                );\n              } else if (e.target.value === \"nordea\") {\n                setLogo(nordeaImage);\n                setVendor(\n                  visaCardImage\n                );\n              } else if (e.target.value === \"handelsbanken\") {\n                setLogo(handelsbankenImage);\n                setVendor(mastercardImage);\n              }\n              setBank(e.target.value);\n            }}\n            defaultValue={\"Vendor\"}\n            id=\"selectBank\"\n            onFocus={flipCard}\n          >\n            <option value=\"Vendor\" disabled hidden>\n              Vendor\n            </option>\n            <option value=\"handelsbanken\">Handelsbanken</option>\n            <option value=\"swedbank\">swedbank</option>\n            <option value=\"icabank\">ica banken</option>\n            <option value=\"nordea\">nordea</option>\n          </select>\n        </div>\n        <button type=\"button\" onClick={addCard}>\n          Add card\n        </button>\n      </form>\n    </div>\n  );\n};\n\nexport { AddCard };\n"]},"metadata":{},"sourceType":"module"}